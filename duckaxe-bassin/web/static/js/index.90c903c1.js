(()=>{"use strict";var e={458:function(e,s,r){var t=r(893),a=r(294),n=r(745);let l=r.p+"static/svg/logo.70d1fa59.svg";function i(e){let{timer:s}=e,r=Math.max(0,100-s/66*100);return(0,t.jsxs)("footer",{children:[(0,t.jsx)("div",{className:"progress",style:{width:`${r}%`}}),(0,t.jsxs)("div",{className:"wrapper",children:[(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:l,width:48,height:48,alt:"BASSIN"}),(0,t.jsx)("figcaption",{className:"font-monospace",children:"BASSIN"})]}),(0,t.jsx)("small",{className:"font-barlow color-grey",children:"Every decentralized share counts"})]})]})}function c(e){let{label:s,headline:r}=e;return(0,t.jsxs)("section",{className:"metric",children:[(0,t.jsx)("span",{className:"metric-label",children:s}),(0,t.jsx)("h3",{className:"metric-headline font-barlow",dangerouslySetInnerHTML:{__html:r}})]})}let o=e=>{let s=e.match(/^([\d.]+)([TGMZ])$/);if(!s)return e;let[,r,t]=s;return`${r}<span>${t}h/s</span>`},d=e=>e>=1e12?(e/1e12).toFixed(2)+"<span>T</span>":e>=1e9?(e/1e9).toFixed(2)+"<span>G</span>":e>=1e6?(e/1e6).toFixed(2)+"<span>M</span>":e>=1e3?(e/1e3).toFixed(2)+"<span>K</span>":e.toString(),h=e=>{let s=Math.floor(e/86400),r=Math.floor(e%86400/3600),t=Math.floor(e%3600/60);return s?`${s}<span>d</span> ${r}<span>h</span> ${t}<span>m</span>`:r?`${r}<span>h</span> ${t}<span>m</span>`:`${t}<span>m</span>`},x=e=>{let s=Math.floor(Date.now()/1e3)-e;return s>60?`${h(s)} <span>ago</span>`:"now"};function j(e){return{__html:e}}function m(e){let{pool:s}=e;return(0,t.jsxs)("div",{className:"tiles",children:[(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Hashrate"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Minute",headline:o(s.hashrate1m)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Hour",headline:o(s.hashrate1hr)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Day",headline:o(s.hashrate1d)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Week",headline:o(s.hashrate7d)})})]})]}),(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Shares"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Best",headline:d(s.bestshare)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"/Second",headline:`${s.SPS1m}`})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Accepted",headline:d(s.accepted)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Rejected",headline:d(s.rejected)})})]})]}),(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Info"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Uptime",headline:h(s.runtime)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:`User${1!==s.Users?"s":""}`,headline:`${s.Users}`})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Update",headline:x(s.lastupdate)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:`Worker${1!==s.Workers?"s":""}`,headline:`${s.Workers}`})})]})]})]})}function u(e){let{primary:s,secondary:r}=e;return(0,t.jsxs)("div",{className:"divider font-monospace",children:[(0,t.jsx)("strong",{children:s}),(0,t.jsx)("span",{children:r})]})}function p(e){let{msg:s}=e;return(0,t.jsxs)("div",{className:"message",children:[(0,t.jsx)("strong",{children:s}),(0,t.jsxs)("table",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Stratum"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:`${window.location.hostname}:3456`})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Username"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:"<BTCaddress>.<worker>"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Password"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:"x"})})]})]})]})}function f(e){let{user:s}=e;return(0,t.jsxs)("table",{className:"user",children:[(0,t.jsxs)("thead",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",rowSpan:2}),(0,t.jsx)("th",{scope:"col",colSpan:4,className:"font-barlow",children:"Hashrate"}),(0,t.jsx)("th",{scope:"col",colSpan:4,className:"font-barlow",children:"Shares"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",children:"1 Minute"}),(0,t.jsx)("th",{scope:"col",children:"1 Hour"}),(0,t.jsx)("th",{scope:"col",children:"1 Day"}),(0,t.jsx)("th",{scope:"col",children:"1 Week"}),(0,t.jsx)("th",{scope:"col",children:"â†“ Best"}),(0,t.jsx)("th",{scope:"col",children:"Best Ever"}),(0,t.jsx)("th",{scope:"col",children:"Total"}),(0,t.jsx)("th",{scope:"col",children:"Last"})]})]}),(0,t.jsxs)("tbody",{children:[s.worker.sort((e,s)=>s.bestshare-e.bestshare).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{scope:"row",children:e.workername.split(".").pop()}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate1m))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate1hr))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate1d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate7d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(e.bestshare))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(e.bestever))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(e.shares))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(x(e.lastshare))})]},e.workername)),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{scope:"row"}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate1m))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate1hr))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate1d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate7d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(s.bestshare))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(s.bestever))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(d(s.shares))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(x(s.lastshare))})]})]})]})}let w=a.memo(e=>{let{pool:s,users:r}=e;return(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)(u,{primary:"POOL",secondary:`${window.location.hostname}:3456`}),(0,t.jsx)(m,{pool:s})]}),Object.entries(r).length?Object.entries(r).map(e=>{let[s,r]=e;return(0,t.jsxs)("section",{className:"user",children:[(0,t.jsx)(u,{primary:"USER",secondary:r.username}),(0,t.jsx)(f,{user:r})]},s)}):(0,t.jsx)(p,{msg:"Awaiting shares ..."})]})});function b(){return(0,t.jsx)("div",{className:"loader",children:(0,t.jsx)("span",{})})}let g=async e=>{let s=await fetch(e);if(!s.ok)throw Error(`Request failed: ${s.status} ${s.statusText}`);return s},y=async()=>{try{let e=await g(`/pool/pool.status?${Date.now()}`),[s,r,t]=(await e.text()).trim().split("\n").filter(Boolean).map(e=>JSON.parse(e));return{...s,...r,...t}}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error in fetchPool")}},N=async()=>{try{let e=await g("/users"),s=[...(await e.text()).matchAll(/href="([^"]+)"/g)].map(e=>e[1]);return await Promise.all(s.map(async e=>{let s=await g(`/users/${e}?${Date.now()}`);return{...await s.json(),username:e}}))}catch(e){if(e instanceof Error)throw e;throw Error("Unknown error in fetchUsers")}},S=document.getElementById("root");S&&n.createRoot(S).render((0,t.jsx)(a.StrictMode,{children:(0,t.jsx)(()=>{let[e,s]=(0,a.useState)(void 0),[r,n]=(0,a.useState)(void 0),[l,c]=(0,a.useState)(0),o=(0,a.useCallback)(async()=>{try{let e=await y(),r=await N();s(e),n(r)}catch(e){console.error("Data fetch error",e)}},[]);return(0,a.useEffect)(()=>{o();let e=setInterval(()=>{c(e=>++e>=66?(o(),0):e)},1e3);return()=>clearInterval(e)},[o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{timer:l}),e&&r?(0,t.jsx)(w,{pool:e,users:r}):(0,t.jsx)(b,{})]})},{})}))}},s={};function r(t){var a=s[t];if(void 0!==a)return a.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,r),n.exports}r.m=e,r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e=[];r.O=(s,t,a,n)=>{if(t){n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[t,a,n];return}for(var i=1/0,l=0;l<e.length;l++){for(var[t,a,n]=e[l],c=!0,o=0;o<t.length;o++)(!1&n||i>=n)&&Object.keys(r.O).every(e=>r.O[e](t[o]))?t.splice(o--,1):(c=!1,n<i&&(i=n));if(c){e.splice(l--,1);var d=a();void 0!==d&&(s=d)}}return s}})(),r.p="/",(()=>{var e={980:0};r.O.j=s=>0===e[s];var s=(s,t)=>{var a,n,[l,i,c]=t,o=0;if(l.some(s=>0!==e[s])){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(c)var d=c(r)}for(s&&s(t);o<l.length;o++)n=l[o],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},t=self.webpackChunkbassin=self.webpackChunkbassin||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var t=r.O(void 0,["361"],function(){return r(458)});t=r.O(t)})();